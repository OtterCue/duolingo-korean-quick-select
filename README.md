# Duolingo Korean Quick Select

듀오링고에서 한글 단어를 **영어 키보드로** 빠르게 선택할 수 있는 Chrome 확장 프로그램입니다.

## ✨ 핵심 기능

### 🎯 한/영 전환 필요 없음!

영어 자판 그대로 초성 입력 → 즉시 단어 선택

```
r = ㄱ    s = ㄴ    d = ㅇ    f = ㄹ
```

### ⚡ 빠른 예시

문제: **"We are here together"** → 한국어로?

```
d 입력 → "우리는", "여기" 파란색 ✨
df 입력 → "우리는"만 녹색 → 자동 선택! 🎯
```

### 🧩 지원 챌린지

- `match` / `storiesMatch` (짝 맞추기)
- `listenMatch` (듣고 짝 맞추기)
- `stories` (스토리 선택지)
- `orderTapComplete` (단어 탭 순서 문제)
- `listen` / `listenIsolation` / `translate` 계열 화면에서 오디오/입력 보조 동작

---

## 🎹 키보드 매핑표

### 초성 자판 (QWERTY 기준)

```
왼손 위줄:  r=ㄱ  t=ㅅ  q=ㅂ  w=ㅈ  e=ㄷ
왼손 가운데: a=ㅁ  s=ㄴ  d=ㅇ  f=ㄹ  g=ㅎ
왼손 아래:  z=ㅋ  x=ㅌ  c=ㅊ  v=ㅍ
```

### 자주 쓰는 단어 조합

| 단어 | 초성 | 입력 키 |
|------|------|---------|
| 우리는 | ㅇㄹㄴ | `dfS` |
| 나는 | ㄴㄴ | `ss` |
| 같이 | ㄱㅌ | `rf` |
| 여기 | ㅇㄱ | `dr` |
| 있어요 | ㅇㅅㅇ | `dtd` |
| 파티 | ㅍㅌ | `vx` |

---

## 💾 설치 방법

### Chrome에서 설치:

1. ZIP 파일 압축 해제
2. Chrome 브라우저에서 `chrome://extensions/` 접속
3. 우측 상단 "개발자 모드" 켜기
4. "압축해제된 확장 프로그램을 로드합니다" 클릭
5. 압축 해제한 폴더 선택
6. **듀오링고 페이지 새로고침 (F5)**

### Edge에서 설치:

1. Edge 브라우저에서 `edge://extensions/` 접속
2. 좌측 하단 "개발자 모드" 켜기
3. "압축을 푼 확장 로드" 클릭
4. 압축 해제한 폴더 선택
5. **듀오링고 페이지 새로고침 (F5)**

---

## 🎮 사용 방법

### 1. 확장 프로그램 확인

1. 듀오링고 접속
2. **F12** 키 → Console 탭
3. 다음 메시지 확인:

```
✅ Duolingo Korean Quick Select 활성화됨!
💡 영어 키보드 → 한글 자판 매핑 모드!
```

### 2. 레슨 시작

1. 단어 선택 문제로 이동
2. 콘솔에서 확인:

```
✅ 단어 은행 발견! 한글 빠른 선택 활성화됨
📝 한글 버튼 10개 발견: ['우리는', '여기', ...]
⌨️ 영어 자판으로 입력하세요! (r=ㄱ, s=ㄴ, d=ㅇ ...)
```

### 3. 영어 자판으로 입력

```
예시 1: "우리는" 찾기
d 입력 → "우리는", "여기", "있어요" 파란색
df 입력 → "우리는"만 녹색 → 자동 선택!

예시 2: "나는" 찾기
s 입력 → "나는", "나의" 파란색
ss 입력 → "나는"만 녹색 → 자동 선택!

예시 3: "같이" 찾기
r 입력 → "같이", "고양이" 파란색
rf 입력 → "같이"만 녹색 → 자동 선택!
```

### 4. 화면 우측 하단 확인

입력한 초성이 실시간으로 표시됩니다:

```
┌─────────────┐
│  ㅇㄹㄴ      │
│ r=ㄱ s=ㄴ... │
└─────────────┘
```

팝업에서도 아래 상태를 실시간으로 확인할 수 있습니다:

- `currentInput`: 현재 입력 중인 값
- `totalInputs`: 총 입력 횟수
- `autoSelects`: 자동 선택 횟수
- `lastInput`: 마지막 입력 키

---

## ⌨️ 단축키

- **공통 입력**
- 영어 자판 기반 한글 자모 매핑 입력 (`r`, `s`, `d`, `f` ...)
- 한글 자모 직접 입력 (`ㄱ`, `ㄴ`, `ㄷ` ...)

- **편집/초기화**
- `Backspace` / `Delete`: 입력 중이면 마지막 글자 삭제, 입력이 비어 있으면 마지막 배치 단어 취소
- `ESC` (`Escape`): 전체 입력/하이라이트 초기화
- `Enter`: 정확히 일치한 항목이 있을 때 선택, 전설 결과 화면에서는 계속 버튼 동작

- **Match / Stories Match**
- `1~0`: 번호 버튼 선택
- `q/w/e/r/t`: 오른쪽 열 `6~0` 보조 선택

- **Listen Match**
- `1~8`: 번호 버튼 선택
- `q/w/e/r`: 보조 선택 (`5~8`)

- **Stories 선택지**
- `1~3`: 스토리 선택지 선택

- **오디오 재생**
- `1`: 일반 속도 재생
- `2`: 느린 속도 재생
- `Ctrl+1`, `Ctrl+2`: listenIsolation에서 상단 스피커 우선 재생
- `match` / `storiesMatch`에서는 `1`, `2`가 버튼 선택에 사용되므로 오디오 단축키 비활성

---

## 🔧 문제 해결

### Q: 버튼이 안 변해요

**A:** 콘솔(F12) 확인:

```
✅ 단어 은행 발견!  → 정상
📝 한글 버튼 X개 발견  → X가 0보다 커야 함
```

X가 0이면:
- 단어 선택 문제가 아님
- 타이핑 문제는 지원 안 됨

### Q: 키 입력이 안 돼요

**A:** 콘솔에서 `d` 키를 눌러보세요:

```
✅ "d" → "ㅇ" 입력! 현재: "ㅇ"  → 정상
```

아무것도 안 나오면:
1. 페이지 새로고침 (F5)
2. 확장 프로그램 재설치

### Q: 한글로 직접 입력해도 되나요?

**A:** 네! 한글 모드에서 `ㄱ`, `ㄴ`, `ㄷ` 직접 입력도 가능합니다.

하지만 **영어 자판이 더 편합니다**:
- 한/영 전환 불필요
- 듀오링고 단축키(Enter, Space)와 충돌 없음

---

## 💡 프로 팁

### 1. 자주 쓰는 패턴 외우기

```
d로 시작:  d = "여기", "우리는", "있어요"
s로 시작:  s = "나는", "너는", "새"
r로 시작:  r = "같이", "고양이", "가다"
```

### 2. 빠른 입력

- 1글자 입력 → 여러 단어 하이라이트
- 2글자 입력 → 정확한 단어 선택
- 3글자 이상은 거의 필요 없음

### 3. Backspace 활용

```
df 입력 → "우리는" 선택됨
← Backspace → "d"만 남음
r 추가 → "dr" = "여기" 검색
```

---

## 🎯 동작 원리

1. 챌린지 타입을 감지하고(`match`, `listenMatch`, `stories`, `orderTapComplete` 등) 해당 키 처리 루틴을 선택합니다.
2. 입력 우선순위에 따라 값을 해석합니다.
   - `orderTapComplete` 또는 따옴표 영어 단어가 있는 경우: 알파벳 입력 우선
   - 그 외: `KEY_MAP` 기반 영문 키 -> 한글 자모 변환
   - 추가로 한글 자모 직접 입력도 허용
3. 매칭은 기본적으로 접두(prefix) 일치를 사용하고, 입력이 3글자 이상이면 자모 `subsequence` 매칭도 허용합니다.
   - 동의어 처리: `우리/저희`, `나/저` 등 한글 동의어를 별도 후보로 비교해 자동 선택 후보를 확장합니다.
4. 매칭된 후보는 `matchScore`로 정렬해 더 정확한 후보를 우선 강조합니다.
   - 동의어 매칭일 경우에도 원문 후보를 동일점수 대비 우선하도록 점수 보정합니다.
5. 매칭 결과의 텍스트가 1개로 수렴하면 자동 선택합니다.
6. `Backspace`/`Delete`는
   - 입력값이 있으면 마지막 입력 삭제
   - 입력값이 없으면 마지막으로 배치된 단어를 취소합니다.

---

## 📚 추가 문서

- **QUICKSTART.md** - 30초 설치 가이드
- **GUIDE.md** - 사용 가이드
- **DEBUG.md** - 고급 디버깅

---

## 🌟 특징

- ✅ 한/영 전환 필요 없음
- ✅ 영어 자판 그대로 사용
- ✅ 실시간 입력 표시
- ✅ 자동 단어 선택
- ✅ 직관적인 시각 피드백

---

## 📝 라이선스

MIT License

---

## 🎉 즐거운 학습 되세요!

듀오링고에서 한글 단어 선택이 **10배 빨라집니다**! 🚀
